apiVersion: apps/v1
kind: Deployment
metadata:
  name: mandy-persist-worker
  namespace: project-m-dev
  labels:
    app: mandy-persist-worker
spec:
  replicas: 1
  selector:
    matchLabels:
      app: mandy-persist-worker
  template:
    metadata:
      labels:
        app: mandy-persist-worker
    spec:
      containers:
        - name: mandy-persist-worker
          image: project-m-mandy-persist-worker:latest
          imagePullPolicy: Never
          env:
            - name: GROUP_ID
              value: "persist_worker_001"
            - name: BOOTSTRAP_SERVERS
              value: "kafka-service:9092"
            - name: WORKER_TOPIC
              value: "topic_projectm_cmd_persist"
            - name: PERSIST_URL
              value: "http://mandy-cb-api:8003/cb/cmd"
            - name: BULK_PERSIST_URL
              value: "http://mandy-cb-api:8003/cb/cmds"
            - name: STORE_QUERY_URL
              value: "http://mandy-cb-api:8003/cb/qry"
